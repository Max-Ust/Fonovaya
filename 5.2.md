# Fonovaya

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Фоновая_5._2
{
    class Parallelogram
    {
        protected int width;
        protected int h;
        protected double alfa;

        public Parallelogram()
        {
            width = 6;
            alfa = 30;
            h = 2;
        }

        public Parallelogram(int width, double alfa, int h)
        {
            this.width = width;
            this.alfa = alfa;
            this.h = h;
        }

        public int GetWidth
        {
            get
            {
                return width;
            }
            set
            {
                width = value;
            }
        }
        public double GetAlfa
        {
            get
            {
                return alfa;
            }
            set
            {
                alfa = value;
            }
        }
        public int GetH
        {
            get
            {
                return h;
            }
            set
            {
                h = value;
            }
        }

        public double Storona()
        {
            return (double)h / Math.Sin((double)Math.PI / 180 * alfa);
        }

        public double Area()
        {
            return width * h;
        }

        virtual public bool IsQquare
        {
            get
            {
                if (alfa == 90)
                    return true;
                else
                    return false;
            }
        }

        virtual public double Perimetr()
        {
            return 2 * ((double)Storona() + width);
        }

        virtual public void Show()
        {
            Console.WriteLine("Сторона = {0}, высота = {1}, угол = {2}", width, h, alfa);
        }

        virtual public double Diagonal()
        {
            double d1 = Math.Sqrt(Storona() * Storona() + width * width - 2 * width * Storona() * Math.Cos(Math.PI / 180 * alfa));
            double d2 = Math.Sqrt(Storona() * Storona() + width * width - 2 * width * Storona() * Math.Cos(Math.PI / 180 * (180 - alfa)));

            if (d1 < d2)
                return d1;
            else
                return d2;
        }
    }

    class Rectangle: Parallelogram
    {
        public Rectangle()
        {
            width = 3;
            alfa = 90;
            h = 4;
        }

        public Rectangle(int width, double alfa, int h)
        {
            try
            {
                if (alfa != 90)
                    throw new Exception("угол альфа должен быть = 90!!!");
            }
            catch (Exception error)
            {
                Console.WriteLine("Ошибка, {0}", error.Message);
                Console.ReadKey();
                Environment.Exit(0);
            }

            this.width = width;
            this.alfa = alfa;
            this.h = h;
        }

        public override void Show()
        {
            Console.WriteLine("Мы имеем дело с прямоугольником: ");
            base.Show();
        }

        public override double Diagonal()
        {
            return Math.Sqrt(width * width + h * h);
        }

        public override bool IsQquare
        {
            get
            {
                if (h == width)
                    return true;
                else
                    return false;
            }
        }
    }

    class Romb: Parallelogram
    {
        public Romb()
        {
            width = 6;
            alfa = 30;
            h = 3;
        }

        public Romb(int width, double alfa, int h)
        {
            try
            {
                if (Math.Round((double)h / Math.Sin(Math.PI / 180 * alfa)) != width)
                    throw new Exception("длина сторон должна быть одинакова!!!");
            }
            catch (Exception error)
            {
                Console.WriteLine("Ошибка, {0}", error.Message);
                Console.ReadKey();
                Environment.Exit(0);
            }

            this.width = width;
            this.alfa = alfa;
            this.h = h;
        }

        public override void Show()
        {
            Console.WriteLine("Мы имеем дело с ромбом: ");
            base.Show();
        }

        public override double Diagonal()
        {
            double d1 = Math.Sqrt(width * width + width * width - 2 * width * width * Math.Cos(Math.PI / 180 * alfa));
            double d2 = Math.Sqrt(width * width + width * width - 2 * width * width * Math.Cos(Math.PI / 180 * (180 - alfa)));

            if (d1 > d2)
                return d1;
            else
                return d2;
        }

        public override double Perimetr()
        {
            return 4 * width;
        }

        public override bool IsQquare
        {
            get
            {
                if (alfa == 90)
                    return true;
                else
                    return false;
            }
        }
    }



    class Program
    {
        static void Main(string[] args)
        {
            Parallelogram[] p = new Parallelogram[4];
            p[0] = new Rectangle();

            Console.WriteLine("Введите сторону, угол и высоту прямоугольника: ");

            p[1] = new Rectangle(int.Parse(Console.ReadLine()), double.Parse(Console.ReadLine()), int.Parse(Console.ReadLine()));

            p[2] = new Romb();

            Console.WriteLine("Введите сторону, угол и высоту ромба: ");

            p[3] = new Romb(int.Parse(Console.ReadLine()), double.Parse(Console.ReadLine()), int.Parse(Console.ReadLine()));

            foreach(Parallelogram x in p)
            {
                x.Show();
                Console.WriteLine("Диагональ = {0:f2}", x.Diagonal());
                Console.WriteLine("Периметр = {0:f2}", x.Perimetr());
                Console.WriteLine("Является квадратом: {0}\n", x.IsQquare);
            }

            Console.ReadKey();
        }
    }
}
